{% extends 'base.html.twig' %}

{% block title %} StoreFreeze {% endblock %}

{% block body_id %}app{% endblock %}

{% block header %}

{% endblock %}

{% block main %}
    {% include 'baseOpen.html.php' %}
<div class="backgroundCreate">

    <div class="mdl-tabs__tab-bar">
        <a class="mdl-navigation__link mdl-tabs__tab" href="createStore">Ajouter Produits</a>
        <a class="mdl-navigation__link mdl-tabs__tab" href="readStore">Voir Produits</a>
    </div>

    <section class="paragraphe subtitle read ">
        <div class="black">
            <h3>Produits dans le Congélateur</h3>
        </div>
        <div>
            <nav>
                <table class="leftMenu">
                    <thead>
                        <th class="captionTrie pointerRead borderTrue" onclick="document.location='{{ path('readStore') }}'">Trier par catégorie</th>
                    </thead>
                    <tbody>
                        {% for category in categories %}
                        <tr>
                            <td class="pointerRead borderTrue textShadow" onclick="document.location='{{ path('showProductCategory', 
                            {'name':category.name}) }}'">
                            {{ category.name }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
{# </table> #}
                    <tr>
                        <td>
                            <br><br><br>
                        </td>
                    </tr>
{# <table> #}
                    <thead>
                        <th class="captionTrie pointerRead borderTrue" onclick="document.location='{{ path('readStore') }}'">Trier par produit</th>
                    </thead>
                    <tbody>
                        {% set newArray = [] %}
                            {% for product in products %}
                                {% if product.Freezer.name|default is not empty %}
                                    {% if product.name not in newArray %}
                                    <tr>
                                        <td class="pointerRead borderTrue textShadow" onclick="document.location='{{ path('showProductName', 
                                            {'name':product.name}) }}'">
                                            {{product.name}}
                                        </td>
                                    </tr>
                                    {% set newArray = newArray|merge([product.name]) %}
                                    {% endif %}
                                {% endif %}
                            {% endfor %}
                    </tbody>
                </table>
            </nav>
        </div>

        <div class="black">  
            <div >
                <table class="tableShowProduct backgroundWhite borderTrue">
                    <tbody class="pointerRead">
                        <tr>
                            <th class="thTab borderTrue" onclick="document.location='showProductNameAsc'">Nom du produit</th>
                            <th class="thTab borderTrue" onclick="document.location='showProductCatAsc'">Catégorie</th>
                            <th class="thTab borderTrue">Quantité en Unité</th>
                            <th class="thTab borderTrue">Quantité en Gramme</th>
                            {# <th class="thTab borderTrue">DLC</th> #}
                            <th class="thTab borderTrue" onclick="document.location='showProductTirAsc'">Congélateur</th>
                            {# <th class="thTab borderTrue" colspan ="3">Intéragir</th> #}
                            <th class="thTab borderTrue">Plus</th>
                            <th class="thTab borderTrue">Moins</th>
                            <th class="thTab borderTrue">Modifier</th>
                            <th class="thTab borderTrue">Supprimer</th>
                        </tr>

                        {% for product in products %}
                            {% if product.Freezer.name|default is not empty %}

                                <tr class="textShadow">
                                    <td class="pointerRead borderTrue heightCellule" onclick="document.location='{{ path('showProductName', 
                                        {'name':product.name}) }}'">
                                        {{product.name}}
                                     </td>    
                                    {# <td>{{ product.name }}</td> #}
                                    <td class="pointerRead borderTrue" onclick="document.location='{{ path('showProductCategory', 
                                        {'name':product.Category.name}) }}'">
                                        {{ product.Category.name }}
                                    </td>
                                    {# <td>{{ product.Category.name }}</td>    #}
                                    <td class=" borderTrue">{{ product.quantityUnit }}</td>                                 
                                    <td class=" borderTrue">{{ product.quantityGr }}</td> 
                                    {# <td class=" borderTrue">{{ product.dlc }}</td> #}
                                    <td class=" borderTrue">{{ product.Freezer.name|default('') }}</td>    
                                    {# <td>{{ product.Freezer.name|default('') }}</td> #}
                                    {# <td>{{ product.Freezer.drawer|default('') }}</td> #}

                                    {# change button #}
                                    <td class="borderTrue">
                                        <a class="mdl-list__item-secondary-action mdl-grid" href="{{ path('changeProductAdd', {'id':product.id}) }}" style="text-decoration:none">
                                            <i class="material-icons paragraphe">add</i>
                                        </a>
                                    </td>

                                    {# minus button #}
                                    <td class="borderTrue">
                                        <a class="mdl-list__item-secondary-action mdl-grid" href="{{ path('changeProductMin', {'id':product.id}) }}" style="text-decoration:none">
                                            <i class="material-icons paragraphe">remove</i>
                                        </a>
                                    </td>

                                    {# <td class="tdButton borderTrue"> #}
                                    {# change button #}
                                        {# <button class="Button mdl-button mdl-js-button mdl-button--raised mdl-button--myColorValidate littleButton boxShadow" type="submit">                                               
                                            <a href="{{ path('changeProduct', {'id':product.id}) }}" style="color:white; text-decoration:none">Changer Quantité</a>
                                        </button>
                                    </td> #}
                                    {# <td> #}
                                     {# minus button #}
                                        {# <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--myColorValidate" type="submit">
                                            <a href="{{ path('updateProduct', {'id':product.id}) }}" style="color:white; text-decoration:none"><b>-</b></a>
                                        </button> #}
                                    {# </td> #}

                                    {# update button #}
                                    <td class="borderTrue">
                                        <a class="mdl-list__item-secondary-action mdl-grid" href="{{ path('updateProduct', {'id':product.id}) }}" style="text-decoration:none">
                                            <i class="material-icons paragraphe">edit</i>
                                        </a>
                                    </td>

                                    {# <td class="tdButton borderTrue">           
                                        <button class="Button mdl-button mdl-js-button mdl-button--raised mdl-button--myColorValidate boxShadow" type="submit">
                                            <a href="{{ path('updateProduct', {'id':product.id}) }}" style="color:white; text-decoration:none">Modifier</a>
                                        </button>
                                    </td> #}

                                    {# <td class="tdButton borderTrue"> #}
                                    {# delete button #}
                                    <td class="borderTrue">
                                        <a class="mdl-list__item-secondary-action mdl-grid" href="{{ path('deleteProduct', {'id':product.id}) }}" style="text-decoration:none">
                                            <i class="material-icons paragraphe" onclick="if(!confirm('Confirmer la suppression du produit ?')) return false;">delete</i>
                                        </a>
                                    </td>

                                        {# <button class="Button mdl-button mdl-js-button mdl-button--raised mdl-button--myColorValidate boxShadow" type="submit">                                               
                                            <a href="{{ path('deleteProduct', {'id':product.id}) }}" style="color:white; text-decoration:none" onclick="if(!confirm('Confirmer la suppression du produit ?')) return false;">Supprimer</a>
                                        </button>
                                    </td> #}
                                </tr>
                            {% endif %}
                        {% endfor %}                        
                    </tbody>
                </table>
            </div>
            <br>
        </div>
        {% include 'baseClose.html.php' %}
    </section>
</div>
{% endblock %}
